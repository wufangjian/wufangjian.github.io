---
layout: post
title:  "事件 [js]"
date:   2015-12-05 12:00:00 +0800
categories: [js]
---


# 事件

## 事件流

**事件冒泡**：IE事件流叫做`事件冒泡`,即事件开始时由最具体元素接收，然后逐级向上传播到较为不具体的节点(div(假设div为具体节点) -> body -> html -> document)。

**事件捕获**：Netscape团队提出了另一种事件流叫做`事件捕获`,即事件开始由不太具体的节点先接收然后到具体的某个节点再接收(document -> html -> body -> div(假设div为具体节点))。

`DOM2级事件` 规定事件流包括三个阶段 *事件捕获*、*处理目标*、*事件冒泡*


## 事件处理程序

**DOM0级事件**

定义：通过为事件处理程序赋值的方式为DOM0级事件

```javascript
var btn = document.getElementById('btn');
btn.onclick = function () { 
    console.log('clicked');
 }
```


**DOM2级事件**

"DOM2级事件"定义了两个方法，用于指定和删除事件处理程序的操作：`addEventListener(type, handler, false)`, `removeEventListener(type, handler, false)`;第三个参数true为事件捕获，false为事件冒泡

IE事件处理程序提供了两个对应的方法：`attachEvent(type, handler)`、`detachEvent(type, handler)`

```javascript
var EventUtil = {
  addHandler: function(element, type, handler) {
    if(element.addEventListener){
        element.addEventListener(type, handler, false);
    }else if(element.attachEvent){
        element.attachEvent('on' + type, handler);
    }else{
        element['on' + type] = handler;
    }
  },
  removeHandler: function(element, type, handler) {
    if(element.removeEventListener){
            element.removeEventListener(type, handler, false);
        }else if(element.detachEvent){
            element.detachEvent('on' + type, handler);
        }else{
            element['on' + type] = handler;
        }
  }
};
```

